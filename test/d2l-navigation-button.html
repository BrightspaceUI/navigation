<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, minimum-scale=1, initial-scale=1, user-scalable=yes">
		<title>d2l-navigation-separator test</title>
		<script src="../../webcomponentsjs/webcomponents-lite.js"></script>
		<script src="../../web-component-tester/browser.js"></script>
		<link rel="import" href="../d2l-navigation-button.html">
		<link rel="import" href="../d2l-navigation-button-notification-icon.html">
		<link rel="import" href="../d2l-navigation-button-close.html">
		<link rel="import" href="../d2l-navigation-link.html">
		<link rel="import" href="../d2l-navigation-link-back.html">
		<link rel="import" href="../d2l-navigation-link-image.html">
	</head>
	<body>
		<test-fixture id="baseButton">
			<template>
				<d2l-navigation-button id="base" text="base button alt text"></d2l-navigation-button>
			</template>
		</test-fixture>
		<test-fixture id="iconButton">
			<template>
				<d2l-navigation-button-notification-icon icon="testIcon" text="icon alt text" id="icon"></d2l-navigation-button-notification-icon>
			</template>
		</test-fixture>
		<test-fixture id="closeButton">
			<template>
				<d2l-navigation-button-close></d2l-navigation-button-close>
			</template>
		</test-fixture>
		<test-fixture id="baseLink">
			<template>
				<d2l-navigation-link href="https://www.example.org"></d2l-navigation-link>
			</template>
		</test-fixture>
		<test-fixture id="backLink">
			<template>
				<d2l-navigation-link-back href="https://www.example.org" text="Back Button"></d2l-navigation-link-back>
			</template>
		</test-fixture>
		<test-fixture id="backLinkUndefinedText">
			<template>
				<d2l-navigation-link-back href="https://www.example.org"></d2l-navigation-link-back>
			</template>
		</test-fixture>
		<test-fixture id="imageLink">
			<template>
				<d2l-navigation-link-image href="https://www.example.org" src="testSrc"></d2l-navigation-link-image>
			</template>
		</test-fixture>

		<script>
			var translations = {
				back: [
					{ lang: 'ar', translation: 'العودة' },
					{ lang: 'de', translation: 'Zurück' },
					{ lang: 'en', translation: 'Back' },
					{ lang: 'es', translation: 'Volver' },
					{ lang: 'fr', translation: 'Précédent' },
					{ lang: 'ja', translation: '戻る' },
					{ lang: 'ko', translation: '뒤로' },
					{ lang: 'nl', translation: 'Terug' },
					{ lang: 'pt', translation: 'Voltar' },
					{ lang: 'sv', translation: 'Tillbaka' },
					{ lang: 'tr', translation: 'Geri' },
					{ lang: 'zh', translation: '返回' },
					{ lang: 'zh-TW', translation: '返回' }
				],
				close: [
					{ lang: 'ar', translation: 'إغلاق' },
					{ lang: 'de', translation: 'Schließen' },
					{ lang: 'en', translation: 'Close' },
					{ lang: 'es', translation: 'Cerrar' },
					{ lang: 'fi', translation: 'Sulje' },
					{ lang: 'fr', translation: 'Fermer' },
					{ lang: 'ja', translation: '閉じる' },
					{ lang: 'ko', translation: '닫기' },
					{ lang: 'nb', translation: 'Lukk' },
					{ lang: 'nl', translation: 'Sluiten' },
					{ lang: 'pt', translation: 'Fechar' },
					{ lang: 'sv', translation: 'Stäng' },
					{ lang: 'tr', translation: 'Kapat' },
					{ lang: 'zh', translation: '关闭' },
					{ lang: 'ar-SA', translation: 'إغلاق' },
					{ lang: 'de-DE', translation: 'Schließen' },
					{ lang: 'es-MX', translation: 'Cerrar' },
					{ lang: 'fr-CA', translation: 'Fermer' },
					{ lang: 'ja-JP', translation: '閉じる' },
					{ lang: 'ko-KR', translation: '닫기' },
					{ lang: 'nb-NO', translation: 'Lukk' },
					{ lang: 'nl-NL', translation: 'Sluiten' },
					{ lang: 'pt-BR', translation: 'Fechar' },
					{ lang: 'sv-SE', translation: 'Stäng' },
					{ lang: 'tr-TR', translation: 'Kapat' },
					{ lang: 'zh-CN', translation: '关闭' },
					{ lang: 'zh-TW', translation: '關閉' }
				]
			};

			var button;
			function testInstantiation(name) {
				test('instantiating the element works', function() {
					assert.equal(button.is, name);
				});
			}

			suite('d2l-navigation-button', function() {
				setup(function() {
					button = fixture('baseButton');
				});
				testInstantiation('d2l-navigation-button');
				test('should have title equal to text', function() {
					var title = button.$$('button').getAttribute('title');
					assert.equal(button.text, 'base button alt text');
					assert.equal(button.text, title);
				});
				test('text attribute should reflect changes to text property', function() {
					button.text = 'newText';
					assert.equal(button.getAttribute('text'), 'newText');
				});
				test('text property should reflect changes to text attribute', function() {
					button.setAttribute('text', 'newText');
					assert.equal(button.text, 'newText');
				});
			});

			suite('d2l-navigation-button-notification-icon', function() {
				setup(function() {
					button = fixture('iconButton');
				});
				testInstantiation('d2l-navigation-button-notification-icon');
				test('should have icon and text ', function() {
					assert.equal(button.icon, 'testIcon');
					assert.equal(button.text, 'icon alt text');
				});
				test('icon property should reflect changes to icon attribute', function() {
					button.setAttribute('icon', 'newIcon');
					assert.equal(button.icon, 'newIcon');
				});
				test('should pass text down to the base button', function() {
					var title = button.$$('d2l-navigation-button').text;
					assert.equal(button.text, title);
				});
			});

			suite('d2l-navigation-button-close', function() {
				setup(function() {
					button = fixture('closeButton');
				});
				testInstantiation('d2l-navigation-button-close');
				test('should pass text down to the base button', function() {
					var title = button.$$('d2l-navigation-button-notification-icon').text;
					assert.equal('Close', title);
				});

				translations.close.forEach(function(t) {
					test('should translate \'Close\' to ' + t.translation + ' when lang is ' + t.lang, function() {
						button.language = t.lang;
						var title = button.$$('d2l-navigation-button-notification-icon').text;
						assert.equal(title, t.translation);
					});
				});
			});

			suite('d2l-navigation-link', function() {
				setup(function() {
					button = fixture('baseLink');
				});
				testInstantiation('d2l-navigation-link');
				test('should have an href', function() {
					var anchorHref = button.$$('a').getAttribute('href');
					assert.equal(button.href, 'https://www.example.org');
					assert.equal(button.href, anchorHref);
				});
				test('href attribute should reflect changes to href property', function() {
					button.href = 'newHref';
					assert.equal(button.getAttribute('href'), 'newHref');
				});
				test('href property should reflect changes to href attribute', function() {
					button.setAttribute('href', 'newHref');
					assert.equal(button.href, 'newHref');
				});
			});

			suite('d2l-navigation-link-back', function() {
				setup(function() {
					button = fixture('backLink');
				});
				testInstantiation('d2l-navigation-link-back');
				test('should have text and href', function() {
					assert.equal(button.text, 'Back Button');
					assert.equal(button.href, 'https://www.example.org');
				});
				test('text property should reflect changes to text attribute', function() {
					button.setAttribute('text', 'New Text');
					assert.equal(button.text, 'New Text');
				});
				test('should use default text when text property is null', function() {
					button.text = null;
					var text = button.$$('span').innerHTML;
					assert.equal(text, 'Back');
				});
				test('should omit text when text property is an empty string', function() {
					button.text = '';
					var text = button.$$('span').innerHTML;
					assert.equal(text, '');
				});
				test('should omit text when text attribute is an empty string', function() {
					button.setAttribute('text', '');
					var text = button.$$('span').innerHTML;
					assert.equal(text, '');
				});
				test('should pass href down to the base link', function() {
					var href = button.$$('d2l-navigation-link').href;
					assert.equal(button.href, href);
				});

				translations.back.forEach(function(t) {
					test('should translate \'Back\' to ' + t.translation + ' when lang is ' + t.lang, function() {
						button.text = null;
						button.language = t.lang;
						var text = button.$$('span').innerHTML;
						assert.equal(text, t.translation);
					});
				});
			});

			suite('d2l-navigation-link-back undefined text', function() {
				setup(function() {
					button = fixture('backLinkUndefinedText');
				});
				testInstantiation('d2l-navigation-link-back');
				test('should use default text when text property is undefined', function() {
					var text = button.$$('span').innerHTML;
					assert.equal(text, 'Back');
				});

				translations.back.forEach(function(t) {
					test('should translate \'Back\' to ' + t.translation + ' when lang is ' + t.lang, function() {
						button.language = t.lang;
						var text = button.$$('span').innerHTML;
						assert.equal(text, t.translation);
					});
				});
			});

			suite('d2l-navigation-link-image', function() {
				setup(function() {
					button = fixture('imageLink');
				});
				testInstantiation('d2l-navigation-link-image');
				test('should have src and href', function() {
					assert.equal(button.src, 'testSrc');
					assert.equal(button.href, 'https://www.example.org');
				});
				test('src property should reflect changes to src attribute', function() {
					button.setAttribute('src', 'newSrc');
					assert.equal(button.src, 'newSrc');
				});
				test('should pass href down to the base link', function() {
					var href = button.$$('d2l-navigation-link').href;
					assert.equal(button.href, href);
				});
			});
		</script>
	</body>
</html>
